<!DOCTYPE html>
<html lang="ar" dir="rtl" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Almarai:wght@300;400;700;800&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #10b981 0%, #0ea5e9 100%);
    }
    * { 
      font-family: 'Almarai', 'Tajawal', sans-serif; 
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body { 
      background-color: #f3f4f6;
      background-image: 
        radial-gradient(at 0% 0%, hsla(152,100%,90%,1) 0, transparent 50%), 
        radial-gradient(at 100% 100%, hsla(200,100%,90%,1) 0, transparent 50%);
      background-attachment: fixed;
      min-height: 100vh; 
    }
    
    /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø²Ø¬Ø§Ø¬ Ø§Ù„Ù…Ø­Ø³Ù† */
    .glass-card { 
      background: rgba(255, 255, 255, 0.9); 
      backdrop-filter: blur(16px); 
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.8); 
      box-shadow: 0 10px 40px -10px rgba(0,0,0,0.1);
    }
    
    .input-group {
      position: relative;
      margin-bottom: 1.5rem;
    }

    .input-field { 
      width: 100%; 
      padding: 1rem 1rem 1rem 3rem; /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
      border: 1px solid #e2e8f0; 
      border-radius: 1rem; 
      background: #f8fafc;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      color: #1e293b;
    }
    
    .input-field:focus { 
      border-color: #10b981; 
      background: #fff;
      box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1); 
      outline: none; 
    }

    .input-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: #94a3b8;
      pointer-events: none;
      transition: 0.3s;
    }

    .input-field:focus + .input-icon,
    .input-field:not(:placeholder-shown) + .input-icon {
      color: #10b981;
    }
    
    .btn {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px -5px rgba(16, 185, 129, 0.3);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
      filter: grayscale(100%);
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-slide-in {
      animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      opacity: 0; /* Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù…Ø®ÙÙŠØ© */
    }

    .animation-delay-100 { animation-delay: 0.1s; }
    .animation-delay-200 { animation-delay: 0.2s; }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
      20%, 40%, 60%, 80% { transform: translateX(4px); }
    }

    .shake { animation: shake 0.4s; }
    
    /* ØªØ­Ø³ÙŠÙ† Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
  </style>
</head>
<body class="antialiased text-gray-800">

<main class="min-h-screen py-8 px-4 flex justify-center items-start">
  <div class="w-full max-w-2xl relative">
    
    <div class="absolute -top-20 -right-20 w-64 h-64 bg-green-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
    <div class="absolute -top-20 -left-20 w-64 h-64 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>

    <header class="text-center mb-8 animate-slide-in relative z-10">
      <div class="inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-sm mb-5 border border-white/50">
        <span class="relative flex h-3 w-3">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
        </span>
        <span class="text-sm font-medium text-gray-600">Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†</span>
      </div>
      
      <h1 class="text-4xl md:text-5xl font-black text-gray-800 mb-3 tracking-tight">
        Ù…Ø¬ØªÙ…Ø¹ <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600">Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
      </h1>
      <p class="text-lg text-gray-500 font-medium">Ø¥Ø´Ø±Ø§Ù : Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</p>
    </header>

    <div class="mb-8 animate-slide-in animation-delay-100 relative z-10 flex justify-center">
      <button onclick="testScript()" class="group bg-white hover:bg-gray-50 text-gray-600 text-sm px-5 py-2.5 rounded-xl border border-gray-200 shadow-sm transition-all flex items-center gap-2">
        <span class="w-2 h-2 rounded-full bg-gray-300 group-hover:bg-blue-500 transition-colors"></span>
        Ø§Ø®ØªØ¨Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
      </button>
      <div id="test-result" class="absolute top-12 left-0 right-0 z-20"></div>
    </div>

    <div id="form-container" class="animate-slide-in animation-delay-200 relative z-10">
      <form id="join-form" class="glass-card rounded-3xl p-6 md:p-10 shadow-2xl">
        
        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-gray-800">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨</h2>
          <div class="h-1 w-16 bg-gradient-to-r from-green-500 to-blue-500 mx-auto mt-3 rounded-full"></div>
        </div>

        <div class="space-y-5">
          <div>
            <label for="name" class="block text-sm font-bold text-gray-700 mb-2">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ <span class="text-red-500">*</span></label>
            <div class="relative">
              <input type="text" id="name" name="name" required minlength="3" maxlength="100" class="input-field" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„ Ù‡Ù†Ø§" autocomplete="name">
              <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
              </div>
            </div>
          </div>

          <div>
            <label for="email" class="block text-sm font-bold text-gray-700 mb-2">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ <span class="text-red-500">*</span></label>
            <div class="relative">
              <input type="email" id="email" name="email" required class="input-field" placeholder="example@mail.com" autocomplete="email">
              <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
              </div>
            </div>
          </div>

          <div>
            <label for="phone" class="block text-sm font-bold text-gray-700 mb-2">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ <span class="text-red-500">*</span></label>
            <div class="relative">
              <input type="tel" id="phone" name="phone" required pattern="[0-9]{8}" minlength="8" maxlength="8" class="input-field" placeholder="9xxxxxxx" autocomplete="tel">
              <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="governorate" class="block text-sm font-bold text-gray-700 mb-2">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</label>
              <div class="relative">
                <select id="governorate" name="governorate" class="input-field cursor-pointer appearance-none">
                  <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©...</option>
                  <option value="Ù…Ø³Ù‚Ø·">Ù…Ø³Ù‚Ø·</option>
                  <option value="Ø¸ÙØ§Ø±">Ø¸ÙØ§Ø±</option>
                  <option value="Ù…Ø³Ù†Ø¯Ù…">Ù…Ø³Ù†Ø¯Ù…</option>
                  <option value="Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ">Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ</option>
                  <option value="Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©">Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©</option>
                  <option value="Ø´Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©">Ø´Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©</option>
                  <option value="Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©">Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©</option>
                  <option value="Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
                  <option value="Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
                  <option value="Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©">Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©</option>
                  <option value="Ø§Ù„ÙˆØ³Ø·Ù‰">Ø§Ù„ÙˆØ³Ø·Ù‰</option>
                </select>
                <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                </div>
              </div>
            </div>

            <div>
              <label for="wilayat" class="block text-sm font-bold text-gray-700 mb-2">Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</label>
              <div class="relative">
                <select id="wilayat" name="wilayat" class="input-field cursor-pointer appearance-none disabled:bg-gray-100 disabled:text-gray-400" disabled>
                  <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©...</option>
                </select>
                <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                </div>
              </div>
            </div>
          </div>
          
          <script>
          const OMAN_WILAYAT = {
            "Ù…Ø³Ù‚Ø·": ["Ù…Ø³Ù‚Ø·", "Ù…Ø·Ø±Ø­", "Ø¨ÙˆØ´Ø±", "Ø§Ù„Ø³ÙŠØ¨", "Ø§Ù„Ø¹Ø§Ù…Ø±Ø§Øª", "Ù‚Ø±ÙŠØ§Øª"],
            "Ø¸ÙØ§Ø±": ["ØµÙ„Ø§Ù„Ø©", "Ø·Ø§Ù‚Ø©", "Ù…Ø±Ø¨Ø§Ø·", "Ø³Ø¯Ø­", "Ø±Ø®ÙŠÙˆØª", "Ø¶Ù„ÙƒÙˆØª", "Ù…Ù‚Ø´Ù†", "Ø´Ù„ÙŠÙ… ÙˆØ¬Ø²Ø± Ø§Ù„Ø­Ù„Ø§Ù†ÙŠØ§Øª", "Ø«Ù…Ø±ÙŠØª"],
            "Ù…Ø³Ù†Ø¯Ù…": ["Ø®ØµØ¨", "Ø¯Ø¨Ø§", "Ø¨Ø®Ø§", "Ù…Ø¯Ø­Ø§Ø¡"],
            "Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ": ["Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ", "Ù…Ø­Ø¶Ø©", "Ø§Ù„Ø³Ù†ÙŠÙ†Ø©"],
            "Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©": ["Ù†Ø²ÙˆÙ‰", "Ø¨Ù‡Ù„Ø§Ø¡", "Ù…Ù†Ø­", "Ø§Ù„Ø­Ù…Ø±Ø§Ø¡", "Ø¥Ø²ÙƒÙŠ", "Ø³Ù…Ø§Ø¦Ù„", "Ø£Ø¯Ù…"],
            "Ø´Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©": ["ØµØ­Ø§Ø±", "Ø´Ù†Ø§Øµ", "Ù„ÙˆÙ‰", "ØµØ­Ù…", "Ø§Ù„Ø®Ø§Ø¨ÙˆØ±Ø©", "Ø§Ù„Ø³ÙˆÙŠÙ‚"],
            "Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©": ["Ø§Ù„Ø±Ø³ØªØ§Ù‚", "Ø§Ù„Ø¹ÙˆØ§Ø¨ÙŠ", "Ù†Ø®Ù„", "ÙˆØ§Ø¯ÙŠ Ø§Ù„Ù…Ø¹Ø§ÙˆÙ„", "Ø¨Ø±ÙƒØ§Ø¡"],
            "Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©": ["Ø¥Ø¨Ø±Ø§Ø¡", "Ø§Ù„Ù…Ø¶ÙŠØ¨ÙŠ", "Ø¨Ø¯ÙŠØ©", "Ø§Ù„Ù‚Ø§Ø¨Ù„", "ÙˆØ§Ø¯ÙŠ Ø¨Ù†ÙŠ Ø®Ø§Ù„Ø¯", "Ø¯Ù…Ø§Ø¡ ÙˆØ§Ù„Ø·Ø§Ø¦ÙŠÙŠÙ†"],
            "Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©": ["ØµÙˆØ±", "Ø¬Ø¹Ù„Ø§Ù† Ø¨Ù†ÙŠ Ø¨ÙˆØ¹Ù„ÙŠ", "Ø¬Ø¹Ù„Ø§Ù† Ø¨Ù†ÙŠ Ø¨ÙˆØ­Ø³Ù†", "Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆØ§Ù„ÙˆØ§ÙÙŠ", "Ù…ØµÙŠØ±Ø©"],
            "Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©": ["Ø¹Ø¨Ø±ÙŠ", "ÙŠÙ†Ù‚Ù„", "Ø¶Ù†Ùƒ"],
            "Ø§Ù„ÙˆØ³Ø·Ù‰": ["Ù‡ÙŠÙ…Ø§", "Ø§Ù„Ø¯Ù‚Ù…", "Ù…Ø­ÙˆØª", "Ø§Ù„Ø¬Ø§Ø²Ø±"]
          };

          const governorateSelect = document.getElementById("governorate");
          const wilayatSelect = document.getElementById("wilayat");

          governorateSelect.addEventListener("change", function () {
            const selectedGov = this.value;
            wilayatSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©...</option>';
            wilayatSelect.disabled = true;

            if (!selectedGov || !OMAN_WILAYAT[selectedGov]) return;

            OMAN_WILAYAT[selectedGov].forEach(wilaya => {
              const option = document.createElement("option");
              option.value = wilaya;
              option.textContent = wilaya;
              wilayatSelect.appendChild(option);
            });
            wilayatSelect.disabled = false;
          });
          </script>

          <div>
            <label for="school" class="block text-sm font-bold text-gray-700 mb-2">Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</label>
            <div class="relative">
              <input type="text" id="school" name="school" class="input-field" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ù…Ø¯Ø±Ø³ØªÙƒ" maxlength="100">
              <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m8-2a2 2 0 00-2-2H9a2 2 0 00-2 2h6zM12 9a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2v.001a2 2 0 00.001.001H12z" /></svg>
              </div>
            </div>
            
            <div class="mt-3 bg-red-50 border-r-4 border-red-500 rounded-lg p-3 flex items-start gap-3">
              <div class="text-red-500 text-xl pt-0.5">âš ï¸</div>
              <div>
                <p class="text-sm font-bold text-red-800">ØªÙ†ÙˆÙŠÙ‡ Ù‡Ø§Ù…</p>
                <p class="text-xs md:text-sm text-red-700 mt-1">
                  Ù„Ø§ Ø£Ø³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø§Ø¨ Ù…Ø¯Ø±Ø³ØªÙŠ : <span class="font-bold">Ø³Ø¹Ø¯ Ø¨Ù† Ù…Ø¹Ø§Ø° Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</span>
                </p>
              </div>
            </div>
          </div>
        </div>

        <button type="submit" id="submit-btn" class="btn mt-8 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white w-full py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2">
          <span>Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 rtl:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg>
        </button>

        <div id="form-status" class="hidden mt-4 text-sm font-bold"></div>
      </form>
    </div>

    <div id="success-message" class="hidden animate-slide-in relative z-10">
      <div class="glass-card rounded-3xl p-10 text-center shadow-xl border-t-4 border-green-500">
        <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
          <svg class="w-12 h-12 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
        </div>
        <h2 class="text-3xl font-black text-gray-800 mb-3">ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!</h2>
        <p class="text-gray-500 mb-8 text-lg">Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ. Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ùƒ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.</p>
        <button onclick="resetForm()" class="btn bg-gray-800 hover:bg-gray-900 text-white px-8 py-3 rounded-xl font-bold shadow-lg">
          ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ Ø¢Ø®Ø±
        </button>
      </div>
    </div>

    <footer class="mt-12 text-center relative z-10">
      <button onclick="showAdminLogin()" class="text-gray-400 hover:text-gray-600 text-sm font-medium transition-colors flex items-center justify-center gap-1 mx-auto">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
        Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†
      </button>
      <p class="text-gray-300 text-xs mt-4">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2024</p>
    </footer>

  </div>
</main>

<div id="admin-login-modal" class="hidden fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 transition-all duration-300">
  <div class="bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl animate-slide-in">
    <div class="text-center mb-6">
      <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3">
        <span class="text-2xl">ğŸ”</span>
      </div>
      <h2 class="text-xl font-bold text-gray-800">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†</h2>
    </div>
    
    <form id="admin-login-form" class="space-y-4">
      <div>
        <label class="block text-sm font-bold text-gray-700 mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input type="password" id="admin-password" required class="input-field text-center tracking-widest" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password">
      </div>
      
      <div id="login-error" class="hidden bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center font-bold border border-red-100"></div>
      
      <div class="grid grid-cols-2 gap-3 pt-2">
        <button type="submit" id="login-btn" class="btn bg-gray-800 hover:bg-black text-white py-3 rounded-xl font-bold">Ø¯Ø®ÙˆÙ„</button>
        <button type="button" onclick="hideAdminLogin()" class="btn bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-bold">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
    </form>
  </div>
</div>

<div id="admin-panel" class="hidden fixed inset-0 bg-slate-900 z-50 overflow-auto">
  <div class="max-w-6xl mx-auto p-4 md:p-6">
    <div class="flex flex-col md:flex-row justify-between items-center mb-8 bg-slate-800/50 p-6 rounded-2xl border border-slate-700 backdrop-blur-md">
      <div class="mb-4 md:mb-0 text-center md:text-right">
        <h2 class="text-2xl font-bold text-white flex items-center gap-2 justify-center md:justify-start">
          <span class="text-3xl">ğŸ›ï¸</span> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        </h2>
        <p class="text-slate-400 text-sm mt-1">Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</p>
      </div>
      <button onclick="logoutAdmin()" class="btn bg-red-500/10 hover:bg-red-500 text-red-400 hover:text-white border border-red-500/30 px-6 py-2.5 rounded-xl transition-all">
        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
      </button>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
      <div class="bg-slate-800 border border-slate-700 p-5 rounded-2xl">
        <h3 class="text-white font-bold mb-4 flex items-center gap-2"><span class="text-blue-400">âš¡</span> Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
        <div class="space-y-3">
          <button onclick="adminTestConnection()" class="btn w-full bg-slate-700 hover:bg-slate-600 text-white py-3 rounded-xl text-sm font-medium border border-slate-600">ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„</button>
          <button onclick="loadAllRecords()" class="btn w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl text-sm font-medium shadow-lg shadow-blue-900/20">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
        <div id="admin-test-result" class="mt-4 text-xs text-slate-400 bg-slate-900/50 p-3 rounded-lg min-h-[50px] font-mono"></div>
      </div>
      
      <div class="bg-slate-800 border border-slate-700 p-5 rounded-2xl">
        <h3 class="text-white font-bold mb-4 flex items-center gap-2"><span class="text-green-400">ğŸ“Š</span> Ù…Ù„Ø®Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
        <div class="grid grid-cols-2 gap-3">
          <div class="bg-slate-700/50 p-4 rounded-xl text-center border border-slate-600">
            <div class="text-xs text-slate-400 mb-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
            <div id="total-count" class="text-3xl font-black text-white">-</div>
          </div>
          <div class="bg-slate-700/50 p-4 rounded-xl text-center border border-slate-600">
            <div class="text-xs text-slate-400 mb-1">Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</div>
            <div id="remaining-count" class="text-3xl font-black text-white">-</div>
          </div>
        </div>
      </div>

       <div class="bg-slate-800 border border-slate-700 p-5 rounded-2xl">
         <h3 class="text-white font-bold mb-4 flex items-center gap-2"><span class="text-yellow-400">ğŸ›</span> Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
         <div id="debug-info" class="text-xs text-slate-400 font-mono bg-slate-900 p-3 rounded-xl h-32 overflow-y-auto custom-scrollbar"></div>
       </div>
    </div>
    
    <div class="bg-slate-800 border border-slate-700 rounded-2xl overflow-hidden">
      <div class="p-5 border-b border-slate-700 flex justify-between items-center bg-slate-800/50">
        <h3 class="text-white font-bold flex items-center gap-2"><span class="text-purple-400">ğŸ“‹</span> Ø³Ø¬Ù„ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h3>
        <span class="text-xs text-slate-500 bg-slate-900 px-2 py-1 rounded">Last Update: Now</span>
      </div>
      <div id="records-list" class="p-4 max-h-[500px] overflow-y-auto custom-scrollbar space-y-3"></div>
    </div>
    
  </div>
</div>

<script>
// ============================================
// Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ (Ù†ÙØ³ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©)
// ============================================
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwRU0C6bbgpnbXNAwC_fVgXfWxs_dFezEmsK0vQSJLfw1vlrjKDKIdyWU4K9ziddzf6/exec';

let isSubmitting = false;
let adminPassword = null;

// ============================================
// Ø¯Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
// ============================================
async function testScript() {
  const resultDiv = document.getElementById('test-result');
  if(resultDiv.parentElement.id !== 'admin-test-result') {
    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ
    const btn = document.querySelector('button[onclick="testScript()"]');
    const originalText = btn.innerHTML;
    btn.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...';
    try {
        const response = await fetch(`${SCRIPT_URL}?action=test&t=${Date.now()}`);
        if(response.ok) {
            btn.innerHTML = 'âœ… Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
            btn.classList.add('bg-green-50', 'text-green-600', 'border-green-200');
        } else { throw new Error('Error'); }
    } catch(e) {
        btn.innerHTML = 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„';
        btn.classList.add('bg-red-50', 'text-red-600', 'border-red-200');
    }
    setTimeout(() => { 
        btn.innerHTML = originalText;
        btn.classList.remove('bg-green-50', 'text-green-600', 'border-green-200', 'bg-red-50', 'text-red-600', 'border-red-200');
    }, 3000);
    return;
  }
}

// ============================================
// Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
// ============================================
document.getElementById('join-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  if (isSubmitting) return;
  
  const submitBtn = document.getElementById('submit-btn');
  const formStatus = document.getElementById('form-status');
  const originalText = submitBtn.innerHTML;
  
  isSubmitting = true;
  submitBtn.innerHTML = '<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...';
  submitBtn.disabled = true;
  formStatus.className = 'hidden';
  
  const formData = {
    action: 'create',
    name: document.getElementById('name').value.trim(),
    email: document.getElementById('email').value.trim(),
    phone: document.getElementById('phone').value.trim(),
    governorate: document.getElementById('governorate').value || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
    wilayat: document.getElementById('wilayat').value.trim() || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
    school: document.getElementById('school').value.trim() || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
    submitted_at: new Date().toISOString()
  };
  
  try {
    const response = await fetch(SCRIPT_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'text/plain;charset=utf-8' },
      body: JSON.stringify(formData)
    });
    
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    
    const result = await response.json();
    
    if (result.status === 'success') {
      document.getElementById('form-container').classList.add('hidden');
      document.getElementById('success-message').classList.remove('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    } else {
      showError(result.message);
    }
    
  } catch (error) {
    console.error(error);
    showError('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹');
  } finally {
    isSubmitting = false;
    submitBtn.innerHTML = originalText;
    submitBtn.disabled = false;
  }
});

function showError(msg) {
    const formStatus = document.getElementById('form-status');
    formStatus.innerHTML = `âš ï¸ ${msg}`;
    formStatus.className = 'mt-4 p-3 rounded-xl text-center text-red-600 bg-red-50 border border-red-100 animate-slide-in';
    formStatus.classList.remove('hidden');
}

function resetForm() {
  document.getElementById('join-form').reset();
  document.getElementById('form-container').classList.remove('hidden');
  document.getElementById('success-message').classList.add('hidden');
  document.getElementById('form-status').classList.add('hidden');
}

// ============================================
// ÙƒÙˆØ¯ Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ† (Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£ØµÙ„ÙŠ)
// ============================================
function showAdminLogin() {
  document.getElementById('admin-login-modal').classList.remove('hidden');
  document.getElementById('admin-password').value = '';
  document.getElementById('login-error').classList.add('hidden');
  document.getElementById('admin-password').focus();
}

function hideAdminLogin() {
  document.getElementById('admin-login-modal').classList.add('hidden');
}

document.getElementById('admin-login-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  const password = document.getElementById('admin-password').value;
  const loginBtn = document.getElementById('login-btn');
  const errorDiv = document.getElementById('login-error');
  const loginForm = document.getElementById('admin-login-form');
  
  loginBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
  loginBtn.disabled = true;
  errorDiv.classList.add('hidden');
  
  try {
    const response = await fetch(`${SCRIPT_URL}?action=adminLogin&password=${encodeURIComponent(password)}&t=${Date.now()}`);
    const data = await response.json();
    
    if (data.status === 'success' && data.authenticated) {
      adminPassword = password;
      hideAdminLogin();
      openAdminPanel();
    } else {
      errorDiv.textContent = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
      errorDiv.classList.remove('hidden');
      loginForm.classList.add('shake');
      setTimeout(() => loginForm.classList.remove('shake'), 500);
      document.getElementById('admin-password').value = '';
      document.getElementById('admin-password').focus();
    }
  } catch (error) {
    errorDiv.textContent = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„';
    errorDiv.classList.remove('hidden');
  } finally {
    loginBtn.textContent = 'Ø¯Ø®ÙˆÙ„';
    loginBtn.disabled = false;
  }
});

function openAdminPanel() {
  document.getElementById('admin-panel').classList.remove('hidden');
  document.body.style.overflow = 'hidden';
  updateDebugInfo();
  setTimeout(loadAllRecords, 500);
}

function logoutAdmin() {
  if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
    adminPassword = null;
    document.getElementById('admin-panel').classList.add('hidden');
    document.body.style.overflow = 'auto';
  }
}

async function adminTestConnection() {
    const resultDiv = document.getElementById('admin-test-result');
    resultDiv.innerHTML = '<span class="text-blue-400">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span>';
    try {
        const response = await fetch(`${SCRIPT_URL}?action=test&t=${Date.now()}`);
        const data = await response.json();
        resultDiv.innerHTML = `<span class="text-green-400">âœ… Ù…ØªØµÙ„: ${data.message}</span>`;
    } catch (e) {
        resultDiv.innerHTML = `<span class="text-red-400">âŒ Ø®Ø·Ø£: ${e.message}</span>`;
    }
}

async function loadAllRecords() {
  if (!adminPassword) return;
  const resultDiv = document.getElementById('admin-test-result');
  const statsTotal = document.getElementById('total-count');
  const statsRemaining = document.getElementById('remaining-count');
  
  resultDiv.innerHTML = '<span class="text-blue-400">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</span>';
  
  try {
    const url = `${SCRIPT_URL}?action=getAll&password=${encodeURIComponent(adminPassword)}&t=${Date.now()}`;
    const response = await fetch(url);
    const data = await response.json();
    
    if (data.code === 'UNAUTHORIZED') {
      logoutAdmin(); return;
    }
    
    if (data.status === 'success') {
      statsTotal.textContent = data.count || 0;
      statsRemaining.textContent = data.remaining || 0;
      resultDiv.innerHTML = `<span class="text-green-400">âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«</span>`;
      displayRecords(data.data || []);
    } else {
       resultDiv.innerHTML = `<span class="text-red-400">âŒ ÙØ´Ù„ Ø§Ù„Ø¬Ù„Ø¨</span>`;
    }
  } catch (error) {
    resultDiv.innerHTML = `<span class="text-red-400">âŒ Ø®Ø·Ø£ Ø´Ø¨ÙƒØ©</span>`;
  }
}

function displayRecords(records) {
  const recordsList = document.getElementById('records-list');
  if (!records || records.length === 0) {
    recordsList.innerHTML = '<div class="text-center text-slate-500 py-10">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</div>';
    return;
  }
  
  let html = '';
  records.forEach((record, index) => {
    html += `
      <div class="bg-slate-700/50 p-4 rounded-xl hover:bg-slate-700 transition-colors border border-slate-600/50">
        <div class="flex justify-between mb-2">
          <div class="font-bold text-white">${record['Ø§Ù„Ø§Ø³Ù…'] || record.name}</div>
          <div class="text-xs text-slate-400 font-mono">#${index + 1}</div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-slate-300">
           <div><span class="text-slate-500">Ù…Ø¯Ø±Ø³Ø©:</span> ${record['Ø§Ù„Ù…Ø¯Ø±Ø³Ø©'] || record.school}</div>
           <div><span class="text-slate-500">ÙˆÙ„Ø§ÙŠØ©:</span> ${record['Ø§Ù„ÙˆÙ„Ø§ÙŠØ©'] || record.wilayat}</div>
           <div><span class="text-slate-500">Ù‡Ø§ØªÙ:</span> ${record['Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ'] || record.phone}</div>
           <div class="text-slate-500 text-[10px] mt-1 text-left" dir="ltr">${new Date(record['ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„'] || record.submitted_at).toLocaleString()}</div>
        </div>
      </div>
    `;
  });
  recordsList.innerHTML = html;
}

function updateDebugInfo() {
  document.getElementById('debug-info').innerHTML = `URL: ${SCRIPT_URL}\nTime: ${new Date().toLocaleTimeString()}\nStatus: Admin Active`;
}

window.addEventListener('beforeunload', function() {
  if (isSubmitting) return 'ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹..';
});
</script>

</body>
</html>
