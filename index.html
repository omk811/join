<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³">
  <title>Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</title>
  
  <!-- Ø§Ù„Ø®Ø·ÙˆØ· -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=Readex+Pro:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary: #0d9488;
      --primary-light: #14b8a6;
      --primary-dark: #0f766e;
      --secondary: #f59e0b;
      --accent: #6366f1;
      --bg-dark: #0f172a;
      --bg-card: #1e293b;
      --bg-light: #f8fafc;
      --text-dark: #1e293b;
      --text-light: #f1f5f9;
      --text-muted: #94a3b8;
      --border: rgba(255,255,255,0.1);
      --glass: rgba(255,255,255,0.03);
      --success: #10b981;
      --error: #ef4444;
      --warning: #f59e0b;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Readex Pro', 'Tajawal', sans-serif;
      background: linear-gradient(135deg, #ecfdf5 0%, #f0fdfa 50%, #e0f2fe 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    /* ===================================== */
    /* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
    /* ===================================== */
    .bg-pattern {
      position: fixed;
      inset: 0;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(13, 148, 136, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(99, 102, 241, 0.06) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(245, 158, 11, 0.04) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }
    
    .floating-shapes {
      position: fixed;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }
    
    .shape {
      position: absolute;
      border-radius: 50%;
      opacity: 0.15;
      animation: float 20s ease-in-out infinite;
    }
    
    .shape:nth-child(1) {
      width: 400px;
      height: 400px;
      background: var(--primary);
      top: -100px;
      right: -100px;
      animation-delay: 0s;
    }
    
    .shape:nth-child(2) {
      width: 300px;
      height: 300px;
      background: var(--accent);
      bottom: -50px;
      left: -50px;
      animation-delay: -5s;
    }
    
    .shape:nth-child(3) {
      width: 200px;
      height: 200px;
      background: var(--secondary);
      top: 50%;
      left: 50%;
      animation-delay: -10s;
    }
    
    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg) scale(1); }
      25% { transform: translate(30px, -30px) rotate(5deg) scale(1.05); }
      50% { transform: translate(-20px, 20px) rotate(-5deg) scale(0.95); }
      75% { transform: translate(20px, 10px) rotate(3deg) scale(1.02); }
    }
    
    /* ===================================== */
    /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
    /* ===================================== */
    .main-container {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      padding: 2rem 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    /* ===================================== */
    /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
    /* ===================================== */
    .header {
      text-align: center;
      margin-bottom: 2.5rem;
      animation: slideDown 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }
    
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 0.6rem 1.5rem;
      border-radius: 50px;
      font-size: 0.9rem;
      font-weight: 500;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 20px rgba(13, 148, 136, 0.3);
    }
    
    .badge-icon {
      font-size: 1.1rem;
    }
    
    .main-title {
      font-size: clamp(2rem, 6vw, 3.5rem);
      font-weight: 800;
      color: var(--text-dark);
      margin-bottom: 0.5rem;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, var(--text-dark) 0%, var(--primary-dark) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .subtitle {
      font-size: 1.1rem;
      color: var(--text-muted);
      font-weight: 400;
    }
    
    /* ===================================== */
    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
    /* ===================================== */
    .form-card {
      width: 100%;
      max-width: 600px;
      background: white;
      border-radius: 28px;
      padding: 2.5rem;
      box-shadow: 
        0 4px 6px rgba(0, 0, 0, 0.02),
        0 12px 24px rgba(0, 0, 0, 0.04),
        0 24px 48px rgba(0, 0, 0, 0.04);
      animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
      border: 1px solid rgba(0, 0, 0, 0.04);
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .form-header {
      text-align: center;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 2px solid #f1f5f9;
    }
    
    .form-icon {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      font-size: 2rem;
    }
    
    .form-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 0.5rem;
    }
    
    .form-desc {
      color: var(--text-muted);
      font-size: 0.95rem;
    }
    
    /* ===================================== */
    /* Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
    /* ===================================== */
    .form-group {
      margin-bottom: 1.25rem;
    }
    
    .form-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 0.6rem;
    }
    
    .label-icon {
      font-size: 1rem;
    }
    
    .required {
      color: var(--error);
      font-size: 0.9rem;
    }
    
    .form-input {
      width: 100%;
      padding: 1rem 1.25rem;
      font-size: 1rem;
      font-family: inherit;
      border: 2px solid #e2e8f0;
      border-radius: 14px;
      background: #f8fafc;
      color: var(--text-dark);
      transition: all 0.3s ease;
      outline: none;
    }
    
    .form-input::placeholder {
      color: #94a3b8;
    }
    
    .form-input:hover {
      border-color: #cbd5e1;
    }
    
    .form-input:focus {
      border-color: var(--primary);
      background: white;
      box-shadow: 0 0 0 4px rgba(13, 148, 136, 0.1);
    }
    
    .form-input.error {
      border-color: var(--error);
      background: #fef2f2;
    }
    
    .form-input.error:focus {
      box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.1);
    }
    
    select.form-input {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: left 1rem center;
      background-size: 1.2rem;
      padding-left: 3rem;
    }
    
    select.form-input:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      background-color: #f1f5f9;
    }
    
    /* Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ø§Ù„Ø­Ù‚Ù„ */
    .field-error {
      display: none;
      margin-top: 0.5rem;
      padding: 0.5rem 0.75rem;
      background: #fef2f2;
      border-right: 3px solid var(--error);
      border-radius: 8px;
      font-size: 0.85rem;
      color: #dc2626;
      font-weight: 500;
    }
    
    .field-error.show {
      display: block;
      animation: slideDown 0.3s ease;
    }
    
    /* ØªÙ†ÙˆÙŠÙ‡ Ø§Ù„Ø­Ù‚Ù„ */
    .field-notice {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      margin-top: 0.75rem;
      padding: 0.75rem 1rem;
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 1px solid #f59e0b;
      border-radius: 10px;
      font-size: 0.85rem;
      color: #92400e;
      font-weight: 500;
      line-height: 1.5;
    }
    
    .field-notice-icon {
      font-size: 1rem;
      flex-shrink: 0;
    }
    
    /* ===================================== */
    /* Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
    /* ===================================== */
    .submit-btn {
      width: 100%;
      padding: 1.1rem 2rem;
      font-size: 1.1rem;
      font-weight: 700;
      font-family: inherit;
      color: white;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      border: none;
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1.5rem;
      position: relative;
      overflow: hidden;
    }
    
    .submit-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .submit-btn:hover::before {
      opacity: 1;
    }
    
    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(13, 148, 136, 0.35);
    }
    
    .submit-btn:active {
      transform: translateY(0);
    }
    
    .submit-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }
    
    .submit-btn:disabled:hover {
      box-shadow: none;
    }
    
    .submit-btn span {
      position: relative;
      z-index: 1;
    }
    
    /* ===================================== */
    /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø© */
    /* ===================================== */
    .status-message {
      display: none;
      padding: 1rem 1.25rem;
      border-radius: 12px;
      font-weight: 600;
      text-align: center;
      margin-top: 1rem;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .status-message.success {
      background: #ecfdf5;
      color: #047857;
      border: 1px solid #a7f3d0;
    }
    
    .status-message.error {
      background: #fef2f2;
      color: #dc2626;
      border: 1px solid #fecaca;
    }
    
    .status-message.show {
      display: block;
    }
    
    /* ===================================== */
    /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ */
    /* ===================================== */
    .success-view {
      display: none;
      width: 100%;
      max-width: 500px;
      background: white;
      border-radius: 28px;
      padding: 3rem 2.5rem;
      text-align: center;
      box-shadow: 
        0 4px 6px rgba(0, 0, 0, 0.02),
        0 12px 24px rgba(0, 0, 0, 0.04),
        0 24px 48px rgba(0, 0, 0, 0.04);
      animation: scaleIn 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    }
    
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .success-view.show {
      display: block;
    }
    
    .success-icon {
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      font-size: 3rem;
      animation: bounce 0.6s ease 0.3s;
    }
    
    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .success-title {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--success);
      margin-bottom: 0.75rem;
    }
    
    .success-desc {
      color: var(--text-muted);
      font-size: 1.05rem;
      margin-bottom: 2rem;
    }
    
    .reset-btn {
      padding: 0.9rem 2rem;
      font-size: 1rem;
      font-weight: 600;
      font-family: inherit;
      color: white;
      background: linear-gradient(135deg, var(--accent) 0%, #4f46e5 100%);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .reset-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(99, 102, 241, 0.35);
    }
    
    /* ===================================== */
    /* Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… */
    /* ===================================== */
    .admin-trigger {
      margin-top: 3rem;
      animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.4s both;
    }
    
    .admin-btn {
      padding: 0.7rem 1.5rem;
      font-size: 0.9rem;
      font-weight: 600;
      font-family: inherit;
      color: white;
      background: var(--bg-dark);
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .admin-btn:hover {
      background: #1e293b;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(15, 23, 42, 0.25);
    }
    
    /* ===================================== */
    /* Ø²Ø± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
    /* ===================================== */
    .test-section {
      width: 100%;
      max-width: 600px;
      margin-bottom: 1.5rem;
      animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.1s both;
    }
    
    .test-btn {
      padding: 0.8rem 1.5rem;
      font-size: 0.95rem;
      font-weight: 600;
      font-family: inherit;
      color: white;
      background: linear-gradient(135deg, var(--accent) 0%, #4f46e5 100%);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .test-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(99, 102, 241, 0.35);
    }
    
    .test-result {
      margin-top: 1rem;
      padding: 1rem 1.25rem;
      background: white;
      border-radius: 14px;
      min-height: 60px;
      font-size: 0.9rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      border: 1px solid rgba(0, 0, 0, 0.04);
    }
    
    /* ===================================== */
    /* Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
    /* ===================================== */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(8px);
      z-index: 100;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      animation: fadeIn 0.3s ease;
    }
    
    .modal-overlay.show {
      display: flex;
    }
    
    .modal-card {
      width: 100%;
      max-width: 420px;
      background: white;
      border-radius: 24px;
      padding: 2.5rem;
      animation: scaleIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }
    
    .modal-header {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .modal-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      font-size: 1.8rem;
    }
    
    .modal-title {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text-dark);
    }
    
    .modal-error {
      display: none;
      padding: 0.8rem 1rem;
      background: #fef2f2;
      color: #dc2626;
      border-radius: 10px;
      font-size: 0.9rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 1rem;
    }
    
    .modal-error.show {
      display: block;
      animation: shake 0.4s ease;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-8px); }
      40%, 80% { transform: translateX(8px); }
    }
    
    .modal-actions {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.5rem;
    }
    
    .modal-btn {
      flex: 1;
      padding: 0.9rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      font-family: inherit;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .modal-btn.primary {
      color: white;
      background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
    }
    
    .modal-btn.primary:hover {
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.35);
      transform: translateY(-2px);
    }
    
    .modal-btn.secondary {
      color: var(--text-muted);
      background: #f1f5f9;
    }
    
    .modal-btn.secondary:hover {
      background: #e2e8f0;
    }
    
    /* ===================================== */
    /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
    /* ===================================== */
    .admin-panel {
      display: none;
      position: fixed;
      inset: 0;
      background: var(--bg-dark);
      z-index: 200;
      overflow: auto;
    }
    
    .admin-panel.show {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    
    .admin-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1.5rem;
    }
    
    /* Ù‡ÙŠØ¯Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.25rem 1.5rem;
      background: var(--bg-card);
      border-radius: 16px;
      margin-bottom: 1.5rem;
    }
    
    .admin-header-info h2 {
      font-size: 1.4rem;
      font-weight: 700;
      color: white;
      margin-bottom: 0.25rem;
    }
    
    .admin-header-info p {
      font-size: 0.9rem;
      color: var(--text-muted);
    }
    
    .logout-btn {
      padding: 0.7rem 1.25rem;
      font-size: 0.9rem;
      font-weight: 600;
      font-family: inherit;
      color: white;
      background: linear-gradient(135deg, var(--error) 0%, #dc2626 100%);
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    
    .logout-btn:hover {
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.35);
      transform: translateY(-2px);
    }
    
    /* Ø´Ø¨ÙƒØ© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
    .admin-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
    .stat-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      opacity: 0.1;
    }
    
    .stat-card.primary::before {
      background: var(--primary);
    }
    
    .stat-card.accent::before {
      background: var(--accent);
    }
    
    .stat-card.warning::before {
      background: var(--secondary);
    }
    
    .stat-icon {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .stat-card.primary .stat-icon {
      background: rgba(13, 148, 136, 0.15);
    }
    
    .stat-card.accent .stat-icon {
      background: rgba(99, 102, 241, 0.15);
    }
    
    .stat-card.warning .stat-icon {
      background: rgba(245, 158, 11, 0.15);
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
    }
    
    .stat-value {
      font-size: 2.5rem;
      font-weight: 800;
      color: white;
    }
    
    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
    .tools-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
    }
    
    .tools-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: white;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .tools-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }
    
    .tool-btn {
      padding: 0.7rem 1.25rem;
      font-size: 0.9rem;
      font-weight: 600;
      font-family: inherit;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    
    .tool-btn.blue {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }
    
    .tool-btn.green {
      background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
    }
    
    .tool-btn.purple {
      background: linear-gradient(135deg, var(--accent) 0%, #4f46e5 100%);
    }
    
    .tool-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    .tools-result {
      margin-top: 1rem;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
      min-height: 50px;
      font-size: 0.9rem;
      color: var(--text-light);
      line-height: 1.6;
    }
    
    /* Ù‚Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
    .data-section {
      background: var(--bg-card);
      border-radius: 16px;
      overflow: hidden;
    }
    
    .data-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.25rem 1.5rem;
      background: rgba(0, 0, 0, 0.2);
      border-bottom: 1px solid var(--border);
    }
    
    .data-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: white;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .refresh-btn {
      padding: 0.5rem 1rem;
      font-size: 0.85rem;
      font-weight: 600;
      font-family: inherit;
      color: white;
      background: linear-gradient(135deg, var(--accent) 0%, #4f46e5 100%);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    
    .refresh-btn:hover {
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.35);
      transform: translateY(-2px);
    }
    
    /* Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø© */
    .data-controls {
      padding: 1rem 1.5rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      border-bottom: 1px solid var(--border);
    }
    
    .search-box {
      flex: 1;
      min-width: 200px;
      position: relative;
    }
    
    .search-input {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 2.5rem;
      font-size: 0.95rem;
      font-family: inherit;
      color: white;
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border);
      border-radius: 10px;
      outline: none;
      transition: all 0.3s ease;
    }
    
    .search-input::placeholder {
      color: var(--text-muted);
    }
    
    .search-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.15);
    }
    
    .search-icon {
      position: absolute;
      right: 0.9rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      font-size: 1rem;
      pointer-events: none;
    }
    
    .filter-select {
      padding: 0.75rem 1rem;
      font-size: 0.95rem;
      font-family: inherit;
      color: white;
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border);
      border-radius: 10px;
      outline: none;
      cursor: pointer;
      min-width: 150px;
    }
    
    .filter-select option {
      background: var(--bg-dark);
    }
    
    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
    .data-list {
      padding: 1rem 1.5rem;
      max-height: 600px;
      overflow-y: auto;
    }
    
    .data-list::-webkit-scrollbar {
      width: 6px;
    }
    
    .data-list::-webkit-scrollbar-track {
      background: transparent;
    }
    
    .data-list::-webkit-scrollbar-thumb {
      background: var(--text-muted);
      border-radius: 3px;
    }
    
    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³Ø¬Ù„ */
    .record-card {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 14px;
      padding: 1.25rem;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
      border: 1px solid transparent;
    }
    
    .record-card:hover {
      background: rgba(0, 0, 0, 0.3);
      border-color: var(--primary);
      transform: translateX(-4px);
    }
    
    .record-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1rem;
    }
    
    .record-name {
      font-size: 1.15rem;
      font-weight: 700;
      color: white;
    }
    
    .record-badge {
      padding: 0.3rem 0.7rem;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--primary-light);
      background: rgba(13, 148, 136, 0.15);
      border-radius: 20px;
    }
    
    .record-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 0.75rem;
    }
    
    .record-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 0.8rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
    }
    
    .record-icon {
      font-size: 1rem;
      opacity: 0.7;
    }
    
    .record-text {
      font-size: 0.9rem;
      color: var(--text-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .record-text.muted {
      color: var(--text-muted);
      font-size: 0.8rem;
    }
    
    /* Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© */
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
    }
    
    .empty-icon {
      font-size: 4rem;
      opacity: 0.3;
      margin-bottom: 1rem;
    }
    
    .empty-text {
      font-size: 1.1rem;
      color: var(--text-muted);
    }
    
    /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­ */
    .debug-section {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
      margin-top: 1.5rem;
    }
    
    .debug-title {
      font-size: 1rem;
      font-weight: 700;
      color: white;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .debug-content {
      padding: 1rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      font-family: 'Courier New', monospace;
      font-size: 0.8rem;
      color: #fbbf24;
      line-height: 1.6;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-all;
    }
    
    /* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    .loading {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--primary-light);
    }
    
    .loading-spinner {
      width: 18px;
      height: 18px;
      border: 2px solid currentColor;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* ===================================== */
    /* Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
    /* ===================================== */
    @media (max-width: 768px) {
      .main-container {
        padding: 1.5rem 1rem;
      }
      
      .form-card {
        padding: 2rem 1.5rem;
      }
      
      .admin-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }
      
      .admin-grid {
        grid-template-columns: 1fr;
      }
      
      .record-grid {
        grid-template-columns: 1fr;
      }
      
      .data-controls {
        flex-direction: column;
      }
      
      .search-box {
        width: 100%;
      }
      
      .filter-select {
        width: 100%;
      }
      
      .modal-card {
        padding: 2rem 1.5rem;
      }
      
      .tools-grid {
        flex-direction: column;
      }
      
      .tool-btn {
        width: 100%;
        justify-content: center;
      }
    }
    
    @media (max-width: 480px) {
      .form-card {
        border-radius: 20px;
        padding: 1.5rem 1.25rem;
      }
      
      .stat-value {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>

<!-- Ø§Ù„Ø®Ù„ÙÙŠØ© -->
<div class="bg-pattern"></div>
<div class="floating-shapes">
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
</div>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
<main class="main-container">
  
  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header class="header">
    <div class="badge">
      <span class="badge-icon">âœ¨</span>
      <span>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ…</span>
    </div>
    <h1 class="main-title">Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</h1>
    <p class="subtitle">Ø¥Ø´Ø±Ø§Ù: Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</p>
  </header>
  
  <!-- Ù‚Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
  <div class="test-section">
    <button type="button" onclick="testScript()" class="test-btn">
      <span>ğŸ”§</span>
      <span>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙƒØ±Ø¨ÙŠØª</span>
    </button>
    <div id="test-result" class="test-result"></div>
  </div>
  
  <!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
  <div id="form-container" class="form-card">
    <form id="join-form" novalidate>
      
      <div class="form-header">
        <div class="form-icon">ğŸ“</div>
        <h2 class="form-title">Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</h2>
        <p class="form-desc">Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</p>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="name">
          <span class="label-icon">ğŸ‘¤</span>
          <span>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</span>
          <span class="required">*</span>
        </label>
        <input 
          type="text" 
          id="name" 
          name="name" 
          required 
          minlength="3" 
          maxlength="100" 
          class="form-input" 
          placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø³Ø§Ù„Ù…" 
          autocomplete="name"
          aria-required="true"
          aria-describedby="name-error">
        <div id="name-error" class="field-error"></div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="email">
          <span class="label-icon">ğŸ“§</span>
          <span>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span>
          <span class="required">*</span>
        </label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          required 
          class="form-input" 
          placeholder="Ù…Ø«Ø§Ù„: name@example.com" 
          autocomplete="email"
          aria-required="true"
          aria-describedby="email-error">
        <div id="email-error" class="field-error"></div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="phone">
          <span class="label-icon">ğŸ“±</span>
          <span>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</span>
          <span class="required">*</span>
        </label>
        <input 
          type="tel" 
          id="phone" 
          name="phone" 
          required 
          pattern="[0-9]{8}" 
          minlength="8" 
          maxlength="8" 
          class="form-input" 
          placeholder="Ù…Ø«Ø§Ù„: 99123456" 
          autocomplete="tel"
          aria-required="true"
          aria-describedby="phone-error">
        <div id="phone-error" class="field-error"></div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="governorate">
          <span class="label-icon">ğŸ›ï¸</span>
          <span>Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</span>
          <span class="required">*</span>
        </label>
        <select 
          id="governorate" 
          name="governorate" 
          class="form-input" 
          required
          aria-required="true"
          aria-describedby="governorate-error">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©...</option>
          <option value="Ù…Ø³Ù‚Ø·">Ù…Ø³Ù‚Ø·</option>
          <option value="Ø¸ÙØ§Ø±">Ø¸ÙØ§Ø±</option>
          <option value="Ù…Ø³Ù†Ø¯Ù…">Ù…Ø³Ù†Ø¯Ù…</option>
          <option value="Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ">Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ</option>
          <option value="Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©">Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©</option>
          <option value="Ø´Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©">Ø´Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©</option>
          <option value="Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©">Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©</option>
          <option value="Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
          <option value="Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
          <option value="Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©">Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©</option>
          <option value="Ø§Ù„ÙˆØ³Ø·Ù‰">Ø§Ù„ÙˆØ³Ø·Ù‰</option>
        </select>
        <div id="governorate-error" class="field-error"></div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="wilayat">
          <span class="label-icon">ğŸ“</span>
          <span>Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</span>
          <span class="required">*</span>
        </label>
        <select 
          id="wilayat" 
          name="wilayat" 
          class="form-input" 
          disabled 
          required
          aria-required="true"
          aria-describedby="wilayat-error">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©...</option>
        </select>
        <div id="wilayat-error" class="field-error"></div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="school">
          <span class="label-icon">ğŸ«</span>
          <span>Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</span>
        </label>
        <input 
          type="text" 
          id="school" 
          name="school" 
          class="form-input" 
          placeholder="Ù…Ø«Ø§Ù„: Ù…Ø¯Ø±Ø³Ø© Ø³Ø¹Ø¯ Ø¨Ù† Ù…Ø¹Ø§Ø°" 
          maxlength="100">
        <div class="field-notice">
          <span class="field-notice-icon">âš ï¸</span>
          <span>ØªÙ†ÙˆÙŠÙ‡: Ù„Ø§ Ø£Ø³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø§Ø¨ Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø¨Ù…Ø¯Ø±Ø³Ø© Ø³Ø¹Ø¯ Ø¨Ù† Ù…Ø¹Ø§Ø° Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</span>
        </div>
      </div>
      
      <button type="submit" id="submit-btn" class="submit-btn">
        <span>âœ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</span>
      </button>
      
      <div id="form-status" class="status-message"></div>
    </form>
  </div>
  
  <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ -->
  <div id="success-view" class="success-view">
    <div class="success-icon">ğŸ‰</div>
    <h2 class="success-title">ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!</h2>
    <p class="success-desc">Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.</p>
    <button type="button" onclick="resetForm()" class="reset-btn">ğŸ“ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¢Ø®Ø±</button>
  </div>
  
  <!-- Ø²Ø± Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ† -->
  <div class="admin-trigger">
    <button type="button" onclick="showAdminLogin()" class="admin-btn">
      <span>ğŸ”</span>
      <span>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†</span>
    </button>
  </div>
  
</main>

<!-- Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="login-modal" class="modal-overlay" role="dialog" aria-labelledby="modal-title" aria-modal="true">
  <div class="modal-card">
    <div class="modal-header">
      <div class="modal-icon">ğŸ”</div>
      <h3 id="modal-title" class="modal-title">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†</h3>
    </div>
    
    <form id="login-form">
      <div id="login-error" class="modal-error" role="alert"></div>
      
      <div class="form-group">
        <label class="form-label" for="admin-password">
          <span class="label-icon">ğŸ”‘</span>
          <span>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span>
        </label>
        <input 
          type="password" 
          id="admin-password" 
          required 
          class="form-input" 
          placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" 
          autocomplete="current-password">
      </div>
      
      <div class="modal-actions">
        <button type="submit" id="login-btn" class="modal-btn primary">âœ… Ø¯Ø®ÙˆÙ„</button>
        <button type="button" onclick="hideAdminLogin()" class="modal-btn secondary">âœ• Ø¥Ù„ØºØ§Ø¡</button>
      </div>
    </form>
  </div>
</div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
<div id="admin-panel" class="admin-panel">
  <div class="admin-container">
    
    <!-- Ù‡ÙŠØ¯Ø± Ø§Ù„Ù„ÙˆØ­Ø© -->
    <div class="admin-header">
      <div class="admin-header-info">
        <h2>ğŸ›ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
        <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
      </div>
      <button type="button" onclick="logoutAdmin()" class="logout-btn">
        <span>ğŸšª</span>
        <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
      </button>
    </div>
    
    <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª -->
    <div class="admin-grid">
      
      <!-- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
      <div class="stat-card primary">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
        <div class="stat-value" id="total-count">â€”</div>
      </div>
      
      <!-- Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© -->
      <div class="stat-card accent">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-label">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù…Ù† 1870</div>
        <div class="stat-value" id="remaining-count">â€”</div>
      </div>
      
      <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… -->
      <div class="tools-card">
        <div class="tools-title">
          <span>ğŸ”§</span>
          <span>Ø£Ø¯ÙˆØ§Øª Ø³Ø±ÙŠØ¹Ø©</span>
        </div>
        <div class="tools-grid">
          <button type="button" onclick="adminTestConnection()" class="tool-btn blue">
            <span>ğŸ“¡</span>
            <span>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„</span>
          </button>
          <button type="button" onclick="loadAllRecords()" class="tool-btn green">
            <span>ğŸ“¥</span>
            <span>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
          </button>
          <button type="button" onclick="exportData()" class="tool-btn purple">
            <span>ğŸ“¤</span>
            <span>ØªØµØ¯ÙŠØ± CSV</span>
          </button>
        </div>
        <div id="admin-result" class="tools-result"></div>
      </div>
      
    </div>
    
    <!-- Ù‚Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
    <div class="data-section">
      
      <div class="data-header">
        <div class="data-title">
          <span>ğŸ“‹</span>
          <span>Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
        </div>
        <button type="button" onclick="loadAllRecords()" class="refresh-btn">
          <span>ğŸ”„</span>
          <span>ØªØ­Ø¯ÙŠØ«</span>
        </button>
      </div>
      
      <div class="data-controls">
        <div class="search-box">
          <input 
            type="text" 
            id="search-input" 
            class="search-input" 
            placeholder="Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ..." 
            oninput="filterRecords()"
            aria-label="Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª">
          <span class="search-icon" aria-hidden="true">ğŸ”</span>
        </div>
        <select 
          id="filter-governorate" 
          class="filter-select" 
          onchange="filterRecords()"
          aria-label="ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©">
          <option value="">ÙƒÙ„ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª</option>
          <option value="Ù…Ø³Ù‚Ø·">Ù…Ø³Ù‚Ø·</option>
          <option value="Ø¸ÙØ§Ø±">Ø¸ÙØ§Ø±</option>
          <option value="Ù…Ø³Ù†Ø¯Ù…">Ù…Ø³Ù†Ø¯Ù…</option>
          <option value="Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ">Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ</option>
          <option value="Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©">Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©</option>
          <option value="Ø´Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©">Ø´Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©</option>
          <option value="Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©">Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©</option>
          <option value="Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
          <option value="Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
          <option value="Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©">Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©</option>
          <option value="Ø§Ù„ÙˆØ³Ø·Ù‰">Ø§Ù„ÙˆØ³Ø·Ù‰</option>
        </select>
      </div>
      
      <div id="records-list" class="data-list">
        <div class="empty-state">
          <div class="empty-icon">ğŸ“­</div>
          <div class="empty-text">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª" Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
        </div>
      </div>
      
    </div>
    
    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­ -->
    <div class="debug-section">
      <div class="debug-title">
        <span>ğŸ›</span>
        <span>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­</span>
      </div>
      <div id="debug-info" class="debug-content"></div>
    </div>
    
  </div>
</div>

<script>
(function() {
  'use strict';
  
  // ============================================
  // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
  // ============================================
  const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbypZWK8tE6CpnhcnbQ2bQb875cRkXaaRKNrM59SCiJPR4y5mopCmuRq47W1l4Xagrc9/exec';
  const MAX_CAPACITY = 1870;
  
  let isSubmitting = false;
  let adminPassword = null;
  let allRecords = [];
  
  // ============================================
  // Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª ÙˆØ§Ù„ÙˆÙ„Ø§ÙŠØ§Øª
  // ============================================
  const OMAN_WILAYAT = {
    "Ù…Ø³Ù‚Ø·": ["Ù…Ø³Ù‚Ø·", "Ù…Ø·Ø±Ø­", "Ø¨ÙˆØ´Ø±", "Ø§Ù„Ø³ÙŠØ¨", "Ø§Ù„Ø¹Ø§Ù…Ø±Ø§Øª", "Ù‚Ø±ÙŠØ§Øª"],
    "Ø¸ÙØ§Ø±": ["ØµÙ„Ø§Ù„Ø©", "Ø·Ø§Ù‚Ø©", "Ù…Ø±Ø¨Ø§Ø·", "Ø³Ø¯Ø­", "Ø±Ø®ÙŠÙˆØª", "Ø¶Ù„ÙƒÙˆØª", "Ù…Ù‚Ø´Ù†", "Ø´Ù„ÙŠÙ… ÙˆØ¬Ø²Ø± Ø§Ù„Ø­Ù„Ø§Ù†ÙŠØ§Øª", "Ø«Ù…Ø±ÙŠØª", "Ø§Ù„Ù…Ø²ÙŠÙˆÙ†Ø©"],
    "Ù…Ø³Ù†Ø¯Ù…": ["Ø®ØµØ¨", "Ø¨Ø®Ø§", "Ø¯Ø¨Ø§", "Ù…Ø¯Ø­Ø§"],
    "Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ": ["Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ", "Ù…Ø­Ø¶Ø©", "Ø§Ù„Ø³Ù†ÙŠÙ†Ø©"],
    "Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©": ["Ù†Ø²ÙˆÙ‰", "Ø¨Ù‡Ù„Ø§Ø¡", "Ù…Ù†Ø­", "Ø§Ù„Ø­Ù…Ø±Ø§Ø¡", "Ø¥Ø²ÙƒÙŠ", "Ø³Ù…Ø§Ø¦Ù„", "Ø£Ø¯Ù…", "Ø¨Ø¯Ø¨Ø¯"],
    "Ø´Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©": ["ØµØ­Ø§Ø±", "Ø´Ù†Ø§Øµ", "Ù„ÙˆÙ‰", "ØµØ­Ù…", "Ø§Ù„Ø®Ø§Ø¨ÙˆØ±Ø©", "Ø§Ù„Ø³ÙˆÙŠÙ‚"],
    "Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¨Ø§Ø·Ù†Ø©": ["Ø§Ù„Ø±Ø³ØªØ§Ù‚", "Ø§Ù„Ø¹ÙˆØ§Ø¨ÙŠ", "Ù†Ø®Ù„", "ÙˆØ§Ø¯ÙŠ Ø§Ù„Ù…Ø¹Ø§ÙˆÙ„", "Ø¨Ø±ÙƒØ§Ø¡", "Ø§Ù„Ù…ØµÙ†Ø¹Ø©"],
    "Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©": ["Ø¥Ø¨Ø±Ø§Ø¡", "Ø§Ù„Ù…Ø¶ÙŠØ¨ÙŠ", "Ø¨Ø¯ÙŠØ©", "Ø§Ù„Ù‚Ø§Ø¨Ù„", "ÙˆØ§Ø¯ÙŠ Ø¨Ù†ÙŠ Ø®Ø§Ù„Ø¯", "Ø¯Ù…Ø§Ø¡ ÙˆØ§Ù„Ø·Ø§Ø¦ÙŠÙŠÙ†"],
    "Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©": ["ØµÙˆØ±", "Ø¬Ø¹Ù„Ø§Ù† Ø¨Ù†ÙŠ Ø¨ÙˆØ¹Ù„ÙŠ", "Ø¬Ø¹Ù„Ø§Ù† Ø¨Ù†ÙŠ Ø¨ÙˆØ­Ø³Ù†", "Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆØ§Ù„ÙˆØ§ÙÙŠ", "Ù…ØµÙŠØ±Ø©"],
    "Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©": ["Ø¹Ø¨Ø±ÙŠ", "ÙŠÙ†Ù‚Ù„", "Ø¶Ù†Ùƒ"],
    "Ø§Ù„ÙˆØ³Ø·Ù‰": ["Ù‡ÙŠÙ…Ø§Ø¡", "Ø§Ù„Ø¯Ù‚Ù…", "Ù…Ø­ÙˆØª", "Ø§Ù„Ø¬Ø§Ø²Ø±"]
  };
  
  // ============================================
  // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
  // ============================================
  
  // ØªÙ†Ø¸ÙŠÙ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Øµ
  function sanitizeInput(value) {
    if (typeof value !== 'string') return '';
    return value.trim().replace(/\s+/g, ' ');
  }
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
  function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
  function isValidPhone(phone) {
    const phoneRegex = /^[0-9]{8}$/;
    return phoneRegex.test(phone);
  }
  
  // Ø¹Ø±Ø¶ Ø®Ø·Ø£ Ø§Ù„Ø­Ù‚Ù„
  function showFieldError(fieldId, message) {
    const field = document.getElementById(fieldId);
    const errorDiv = document.getElementById(`${fieldId}-error`);
    
    if (field && errorDiv) {
      field.classList.add('error');
      errorDiv.textContent = message;
      errorDiv.classList.add('show');
    }
  }
  
  // Ø¥Ø®ÙØ§Ø¡ Ø®Ø·Ø£ Ø§Ù„Ø­Ù‚Ù„
  function hideFieldError(fieldId) {
    const field = document.getElementById(fieldId);
    const errorDiv = document.getElementById(`${fieldId}-error`);
    
    if (field && errorDiv) {
      field.classList.remove('error');
      errorDiv.classList.remove('show');
    }
  }
  
  // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„
  function hideAllFieldErrors() {
    const fields = ['name', 'email', 'phone', 'governorate', 'wilayat'];
    fields.forEach(hideFieldError);
  }
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
  function validateForm() {
    hideAllFieldErrors();
    let isValid = true;
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø³Ù…
    const name = sanitizeInput(document.getElementById('name').value);
    if (!name || name.length < 3) {
      showFieldError('name', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ (3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)');
      isValid = false;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
    const email = sanitizeInput(document.getElementById('email').value);
    if (!email) {
      showFieldError('email', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ');
      isValid = false;
    } else if (!isValidEmail(email)) {
      showFieldError('email', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­');
      isValid = false;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
    const phone = sanitizeInput(document.getElementById('phone').value);
    if (!phone) {
      showFieldError('phone', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');
      isValid = false;
    } else if (!isValidPhone(phone)) {
      showFieldError('phone', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ (8 Ø£Ø±Ù‚Ø§Ù…)');
      isValid = false;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
    const governorate = document.getElementById('governorate').value;
    if (!governorate) {
      showFieldError('governorate', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©');
      isValid = false;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆÙ„Ø§ÙŠØ©
    const wilayat = document.getElementById('wilayat').value;
    if (!wilayat) {
      showFieldError('wilayat', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©');
      isValid = false;
    }
    
    return isValid;
  }
  
  // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®
  function formatDate(dateString) {
    if (!dateString) return 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
    try {
      return new Date(dateString).toLocaleString('ar-SA', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    } catch {
      return dateString;
    }
  }
  
  // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø©
  function showStatusMessage(message, type = 'error') {
    const statusDiv = document.getElementById('form-status');
    statusDiv.textContent = message;
    statusDiv.className = 'status-message show ' + type;
    
    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
    setTimeout(() => {
      statusDiv.classList.remove('show');
    }, 5000);
  }
  
  // ============================================
  // Ø±Ø¨Ø· Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¨Ø§Ù„ÙˆÙ„Ø§ÙŠØ©
  // ============================================
  function setupGovernorateWilayatBinding() {
    const governorateSelect = document.getElementById('governorate');
    const wilayatSelect = document.getElementById('wilayat');
    
    governorateSelect.addEventListener('change', function() {
      wilayatSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©...</option>';
      wilayatSelect.disabled = true;
      hideFieldError('wilayat');
      
      if (!this.value || !OMAN_WILAYAT[this.value]) return;
      
      OMAN_WILAYAT[this.value].forEach(wilaya => {
        const option = document.createElement('option');
        option.value = wilaya;
        option.textContent = wilaya;
        wilayatSelect.appendChild(option);
      });
      
      wilayatSelect.disabled = false;
    });
  }
  
  // ============================================
  // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
  // ============================================
  window.testScript = async function() {
    const resultDiv = document.getElementById('test-result');
    resultDiv.innerHTML = '<div class="loading"><div class="loading-spinner"></div><span>Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„...</span></div>';
    
    try {
      const response = await fetch(`${SCRIPT_URL}?action=test&t=${Date.now()}`, {
        method: 'GET',
        headers: { 'Accept': 'application/json' }
      });
      
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      
      const data = await response.json();
      
      resultDiv.innerHTML = `
        <div style="color: var(--success); font-weight: 700; margin-bottom: 0.5rem;">âœ… Ø§ØªØµØ§Ù„ Ù†Ø§Ø¬Ø­!</div>
        <div style="color: var(--text-muted); font-size: 0.85rem;">
          <div>Ø§Ù„Ø­Ø§Ù„Ø©: ${data.status || 'Ù†Ø¬Ø­'}</div>
          <div>Ø§Ù„Ø±Ø³Ø§Ù„Ø©: ${data.message || 'Ù…ØªØµÙ„'}</div>
          <div>Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${data.version || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</div>
        </div>
      `;
      return true;
      
    } catch (error) {
      resultDiv.innerHTML = `
        <div style="color: var(--error); font-weight: 700; margin-bottom: 0.5rem;">âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„!</div>
        <div style="color: var(--text-muted); font-size: 0.85rem;">Ø§Ù„Ø®Ø·Ø£: ${error.message}</div>
      `;
      return false;
    }
  };
  
  // ============================================
  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
  // ============================================
  function setupFormSubmission() {
    const form = document.getElementById('join-form');
    
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      if (isSubmitting) return;
      
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
      if (!validateForm()) {
        showStatusMessage('âŒ ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬', 'error');
        return;
      }
      
      const submitBtn = document.getElementById('submit-btn');
      const originalText = submitBtn.innerHTML;
      
      isSubmitting = true;
      submitBtn.innerHTML = '<span class="loading"><div class="loading-spinner"></div><span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...</span></span>';
      submitBtn.disabled = true;
      hideAllFieldErrors();
      
      const formData = {
        action: 'create',
        name: sanitizeInput(document.getElementById('name').value),
        email: sanitizeInput(document.getElementById('email').value),
        phone: sanitizeInput(document.getElementById('phone').value),
        governorate: document.getElementById('governorate').value,
        wilayat: document.getElementById('wilayat').value,
        school: sanitizeInput(document.getElementById('school').value) || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
        submitted_at: new Date().toISOString()
      };
      
      try {
        const response = await fetch(SCRIPT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'text/plain;charset=utf-8' },
          body: JSON.stringify(formData)
        });
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const result = await response.json();
        
        if (result.status === 'success') {
          document.getElementById('form-container').style.display = 'none';
          document.getElementById('success-view').classList.add('show');
        } else {
          showStatusMessage(`âŒ ${result.message}`, 'error');
        }
        
      } catch (error) {
        console.error('Submission error:', error);
        showStatusMessage('âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
      } finally {
        isSubmitting = false;
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    });
  }
  
  // ============================================
  // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
  // ============================================
  window.resetForm = function() {
    document.getElementById('join-form').reset();
    document.getElementById('wilayat').disabled = true;
    hideAllFieldErrors();
    document.getElementById('form-container').style.display = 'block';
    document.getElementById('success-view').classList.remove('show');
  };
  
  // ============================================
  // Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  // ============================================
  window.showAdminLogin = function() {
    const modal = document.getElementById('login-modal');
    modal.classList.add('show');
    document.getElementById('admin-password').value = '';
    document.getElementById('login-error').classList.remove('show');
    
    // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    setTimeout(() => {
      document.getElementById('admin-password').focus();
    }, 100);
  };
  
  window.hideAdminLogin = function() {
    document.getElementById('login-modal').classList.remove('show');
  };
  
  function setupAdminLogin() {
    const form = document.getElementById('login-form');
    
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const password = document.getElementById('admin-password').value;
      const loginBtn = document.getElementById('login-btn');
      const errorDiv = document.getElementById('login-error');
      
      loginBtn.innerHTML = '<span class="loading"><div class="loading-spinner"></div><span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</span></span>';
      loginBtn.disabled = true;
      errorDiv.classList.remove('show');
      
      try {
        const response = await fetch(`${SCRIPT_URL}?action=adminLogin&password=${encodeURIComponent(password)}&t=${Date.now()}`);
        
        if (!response.ok) {
          throw new Error('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
        }
        
        const data = await response.json();
        
        if (data.status === 'success' && data.authenticated) {
          adminPassword = password;
          hideAdminLogin();
          openAdminPanel();
        } else {
          errorDiv.textContent = 'âŒ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©';
          errorDiv.classList.add('show');
          document.getElementById('admin-password').value = '';
          document.getElementById('admin-password').focus();
        }
        
      } catch (error) {
        console.error('Login error:', error);
        errorDiv.textContent = 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
        errorDiv.classList.add('show');
      } finally {
        loginBtn.innerHTML = 'âœ… Ø¯Ø®ÙˆÙ„';
        loginBtn.disabled = false;
      }
    });
    
    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
    document.getElementById('login-modal').addEventListener('click', function(e) {
      if (e.target === this) {
        hideAdminLogin();
      }
    });
  }
  
  // ============================================
  // Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
  // ============================================
  function openAdminPanel() {
    document.getElementById('admin-panel').classList.add('show');
    document.body.style.overflow = 'hidden';
    updateDebugInfo();
    setTimeout(loadAllRecords, 500);
  }
  
  window.logoutAdmin = function() {
    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
      adminPassword = null;
      allRecords = [];
      document.getElementById('admin-panel').classList.remove('show');
      document.body.style.overflow = 'auto';
    }
  };
  
  window.adminTestConnection = async function() {
    const resultDiv = document.getElementById('admin-result');
    resultDiv.innerHTML = '<div class="loading"><div class="loading-spinner"></div><span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±...</span></div>';
    
    try {
      const response = await fetch(`${SCRIPT_URL}?action=test&t=${Date.now()}`);
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }
      
      const data = await response.json();
      
      resultDiv.innerHTML = `<div style="color: #10b981; font-weight: 600;">âœ… Ù…ØªØµÙ„ - ${data.message || 'Ù†Ø¬Ø­'}</div>`;
      
    } catch (error) {
      resultDiv.innerHTML = `<div style="color: #ef4444; font-weight: 600;">âŒ Ø®Ø·Ø£ - ${error.message}</div>`;
    }
  };
  
  window.loadAllRecords = async function() {
    if (!adminPassword) {
      alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
      return;
    }
    
    const resultDiv = document.getElementById('admin-result');
    resultDiv.innerHTML = '<div class="loading"><div class="loading-spinner"></div><span>Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</span></div>';
    
    try {
      const response = await fetch(`${SCRIPT_URL}?action=getAll&password=${encodeURIComponent(adminPassword)}&t=${Date.now()}`);
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }
      
      const data = await response.json();
      
      if (data.code === 'UNAUTHORIZED') {
        alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬.');
        logoutAdmin();
        return;
      }
      
      if (data.status === 'success') {
        const count = data.count || 0;
        const remaining = Math.max(0, MAX_CAPACITY - count);
        
        document.getElementById('total-count').textContent = count;
        document.getElementById('remaining-count').textContent = remaining;
        
        resultDiv.innerHTML = `<div style="color: #10b981; font-weight: 600;">âœ… ØªÙ… Ø¬Ù„Ø¨ ${count} Ø·Ù„Ø¨</div>`;
        
        allRecords = data.data || [];
        displayRecords(allRecords);
      } else {
        resultDiv.innerHTML = `<div style="color: #ef4444; font-weight: 600;">âŒ ${data.message}</div>`;
        displayRecords([]);
      }
      
    } catch (error) {
      console.error('Load records error:', error);
      resultDiv.innerHTML = `<div style="color: #ef4444; font-weight: 600;">âŒ ${error.message}</div>`;
      displayRecords([]);
    }
  };
  
  function displayRecords(records) {
    const list = document.getElementById('records-list');
    
    if (!records || records.length === 0) {
      list.innerHTML = `
        <div class="empty-state">
          <div class="empty-icon">ğŸ“­</div>
          <div class="empty-text">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</div>
        </div>
      `;
      return;
    }
    
    let html = '';
    records.forEach((record, index) => {
      const name = record['Ø§Ù„Ø§Ø³Ù…'] || record.name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
      const email = record['Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ'] || record.email || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯';
      const phone = record['Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ'] || record.phone || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯';
      const governorate = record['Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©'] || record.governorate || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
      const wilayat = record['Ø§Ù„ÙˆÙ„Ø§ÙŠØ©'] || record.wilayat || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
      const school = record['Ø§Ù„Ù…Ø¯Ø±Ø³Ø©'] || record.school || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
      const date = formatDate(record['ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„'] || record.submitted_at);
      
      html += `
        <div class="record-card">
          <div class="record-header">
            <div class="record-name">${escapeHtml(name)}</div>
            <div class="record-badge">#${index + 1}</div>
          </div>
          <div class="record-grid">
            <div class="record-item">
              <span class="record-icon">ğŸ“§</span>
              <span class="record-text">${escapeHtml(email)}</span>
            </div>
            <div class="record-item">
              <span class="record-icon">ğŸ“±</span>
              <span class="record-text">${escapeHtml(phone)}</span>
            </div>
            <div class="record-item">
              <span class="record-icon">ğŸ›ï¸</span>
              <span class="record-text">${escapeHtml(governorate)}</span>
            </div>
            <div class="record-item">
              <span class="record-icon">ğŸ“</span>
              <span class="record-text">${escapeHtml(wilayat)}</span>
            </div>
            <div class="record-item">
              <span class="record-icon">ğŸ«</span>
              <span class="record-text">${escapeHtml(school)}</span>
            </div>
            <div class="record-item">
              <span class="record-icon">â°</span>
              <span class="record-text muted">${date}</span>
            </div>
          </div>
        </div>
      `;
    });
    
    list.innerHTML = html;
  }
  
  // Ø¯Ø§Ù„Ø© Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† XSS
  function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }
  
  window.filterRecords = function() {
    const searchTerm = document.getElementById('search-input').value.toLowerCase();
    const filterGov = document.getElementById('filter-governorate').value;
    
    const filtered = allRecords.filter(record => {
      const name = (record['Ø§Ù„Ø§Ø³Ù…'] || record.name || '').toLowerCase();
      const email = (record['Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ'] || record.email || '').toLowerCase();
      const phone = (record['Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ'] || record.phone || '').toLowerCase();
      const gov = record['Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©'] || record.governorate || '';
      
      const matchesSearch = !searchTerm || 
        name.includes(searchTerm) || 
        email.includes(searchTerm) || 
        phone.includes(searchTerm);
      
      const matchesFilter = !filterGov || gov === filterGov;
      
      return matchesSearch && matchesFilter;
    });
    
    displayRecords(filtered);
  };
  
  window.exportData = function() {
    if (!allRecords || allRecords.length === 0) {
      alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±');
      return;
    }
    
    let csv = '\uFEFF'; // BOM for Arabic
    csv += 'Ø§Ù„Ø§Ø³Ù…,Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ,Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ,Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©,Ø§Ù„ÙˆÙ„Ø§ÙŠØ©,Ø§Ù„Ù…Ø¯Ø±Ø³Ø©,ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„\n';
    
    allRecords.forEach(record => {
      const row = [
        record['Ø§Ù„Ø§Ø³Ù…'] || record.name || '',
        record['Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ'] || record.email || '',
        record['Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ'] || record.phone || '',
        record['Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©'] || record.governorate || '',
        record['Ø§Ù„ÙˆÙ„Ø§ÙŠØ©'] || record.wilayat || '',
        record['Ø§Ù„Ù…Ø¯Ø±Ø³Ø©'] || record.school || '',
        record['ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„'] || record.submitted_at || ''
      ].map(field => `"${field.replace(/"/g, '""')}"`).join(',');
      csv += row + '\n';
    });
    
    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = `Ø·Ù„Ø¨Ø§Øª_Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…_${new Date().toISOString().split('T')[0]}.csv`;
    link.click();
    URL.revokeObjectURL(link.href);
  };
  
  function updateDebugInfo() {
    const debugDiv = document.getElementById('debug-info');
    debugDiv.textContent = `ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙƒØ±Ø¨ÙŠØª: ${SCRIPT_URL}
ğŸ•’ ÙˆÙ‚Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${new Date().toLocaleString('ar-SA')}
ğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${window.location.href}
ğŸ” Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø©: ${adminPassword ? 'Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'ØºÙŠØ± Ù…Ø³Ø¬Ù„'}
ğŸ“Š Ø§Ù„Ø³Ø¹Ø© Ø§Ù„Ù‚ØµÙˆÙ‰: ${MAX_CAPACITY}`;
  }
  
  // ============================================
  // Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
  // ============================================
  function init() {
    setupGovernorateWilayatBinding();
    setupFormSubmission();
    setupAdminLogin();
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    setTimeout(testScript, 1500);
    
    // Ù…Ù†Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¹Ù†Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
    if (window.history.replaceState) {
      window.history.replaceState(null, null, window.location.href);
    }
  }
  
  // ØªØ­Ø°ÙŠØ± Ù‚Ø¨Ù„ Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
  window.addEventListener('beforeunload', function(e) {
    if (isSubmitting) {
      e.preventDefault();
      e.returnValue = 'ÙŠØªÙ… Ø­Ø§Ù„ÙŠØ§Ù‹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©ØŸ';
      return e.returnValue;
    }
  });
  
  // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
  
})();
</script>

</body>
</html>
